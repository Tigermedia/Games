# Plugin Architecture Diagram

## ğŸ—ï¸ Elementor Dynamic Redirect - System Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     WORDPRESS CORE                                  â”‚
â”‚                                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚              ELEMENTOR DYNAMIC REDIRECT PLUGIN               â”‚  â”‚
â”‚  â”‚                                                              â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚
â”‚  â”‚  â”‚              MAIN PLUGIN FILE                          â”‚ â”‚  â”‚
â”‚  â”‚  â”‚      elementor-dynamic-redirect.php                    â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ Plugin headers                                      â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ Constants definition                                â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ Activation/Deactivation hooks                       â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ Class loader                                        â”‚ â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚
â”‚  â”‚                         â”‚                                    â”‚  â”‚
â”‚  â”‚                         â–¼                                    â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚
â”‚  â”‚  â”‚              CORE CLASSES (includes/)                  â”‚ â”‚  â”‚
â”‚  â”‚  â”‚                                                        â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â”‚         EDR_Core                                â”‚  â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â€¢ Initialize all components                    â”‚  â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â€¢ Load dependencies                            â”‚  â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â€¢ Set up hooks                                 â”‚  â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚  â”‚
â”‚  â”‚  â”‚         â”‚                 â”‚                â”‚           â”‚ â”‚  â”‚
â”‚  â”‚  â”‚         â–¼                 â–¼                â–¼           â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â”‚ CSV_Handler  â”‚  â”‚   Redirect   â”‚  â”‚Form_Handler â”‚ â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â”‚              â”‚  â”‚              â”‚  â”‚             â”‚ â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â”‚ â€¢ Parse CSV  â”‚  â”‚ â€¢ Payment    â”‚  â”‚â€¢ Hook into  â”‚ â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â”‚ â€¢ Find dates â”‚  â”‚   check      â”‚  â”‚  Elementor  â”‚ â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â”‚ â€¢ Validate   â”‚  â”‚ â€¢ Select CSV â”‚  â”‚â€¢ Extract    â”‚ â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â”‚ â€¢ Cache      â”‚  â”‚ â€¢ Select     â”‚  â”‚  data       â”‚ â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â”‚              â”‚  â”‚   column     â”‚  â”‚â€¢ Trigger    â”‚ â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â”‚              â”‚  â”‚ â€¢ Generate   â”‚  â”‚  redirect   â”‚ â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â”‚              â”‚  â”‚   URL        â”‚  â”‚             â”‚ â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚  â”‚
â”‚  â”‚  â”‚                                â”‚                       â”‚ â”‚  â”‚
â”‚  â”‚  â”‚                                â–¼                       â”‚ â”‚  â”‚
â”‚  â”‚  â”‚                      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚ â”‚  â”‚
â”‚  â”‚  â”‚                      â”‚     AJAX     â”‚                 â”‚ â”‚  â”‚
â”‚  â”‚  â”‚                      â”‚              â”‚                 â”‚ â”‚  â”‚
â”‚  â”‚  â”‚                      â”‚ â€¢ Handle     â”‚                 â”‚ â”‚  â”‚
â”‚  â”‚  â”‚                      â”‚   requests   â”‚                 â”‚ â”‚  â”‚
â”‚  â”‚  â”‚                      â”‚ â€¢ Security   â”‚                 â”‚ â”‚  â”‚
â”‚  â”‚  â”‚                      â”‚ â€¢ Response   â”‚                 â”‚ â”‚  â”‚
â”‚  â”‚  â”‚                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚ â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚
â”‚  â”‚                                                              â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚
â”‚  â”‚  â”‚           ADMIN INTERFACE (admin/)                     â”‚ â”‚  â”‚
â”‚  â”‚  â”‚                                                        â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â”‚         EDR_Admin                               â”‚  â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â€¢ Register menus                               â”‚  â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â€¢ Enqueue assets                               â”‚  â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â€¢ Handle requests                              â”‚  â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚  â”‚
â”‚  â”‚  â”‚         â”‚                 â”‚                â”‚           â”‚ â”‚  â”‚
â”‚  â”‚  â”‚         â–¼                 â–¼                â–¼           â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â”‚   Settings   â”‚  â”‚ CSV_Manager  â”‚  â”‚Testing_Tool â”‚ â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â”‚              â”‚  â”‚              â”‚  â”‚             â”‚ â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â”‚ â€¢ Field IDs  â”‚  â”‚ â€¢ Upload UI  â”‚  â”‚â€¢ Test form  â”‚ â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â”‚ â€¢ Payment    â”‚  â”‚ â€¢ Validation â”‚  â”‚â€¢ Scenarios  â”‚ â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â”‚   trigger    â”‚  â”‚ â€¢ Preview    â”‚  â”‚â€¢ URL gen    â”‚ â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â”‚ â€¢ Paths      â”‚  â”‚ â€¢ Delete     â”‚  â”‚â€¢ Debug view â”‚ â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â”‚ â€¢ Debug      â”‚  â”‚              â”‚  â”‚             â”‚ â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚  â”‚
â”‚  â”‚  â”‚                                                        â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â”‚         ADMIN VIEWS (admin/views/)              â”‚  â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â”‚                                                 â”‚  â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â€¢ settings-page.php                           â”‚  â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â€¢ csv-manager-page.php                        â”‚  â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â€¢ testing-tool-page.php                       â”‚  â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â€¢ help-page.php                               â”‚  â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚
â”‚  â”‚                                                              â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚
â”‚  â”‚  â”‚              ASSETS (assets/)                          â”‚ â”‚  â”‚
â”‚  â”‚  â”‚                                                        â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  CSS                          JavaScript              â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  admin.css   â”‚              â”‚  admin.js    â”‚       â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â”‚              â”‚              â”‚              â”‚       â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â”‚ â€¢ Settings   â”‚              â”‚ â€¢ Upload     â”‚       â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â”‚   styling    â”‚              â”‚   handler    â”‚       â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â”‚ â€¢ CSV page   â”‚              â”‚ â€¢ Validation â”‚       â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â”‚ â€¢ Test tool  â”‚              â”‚ â€¢ Copy to    â”‚       â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â”‚              â”‚              â”‚   clipboard  â”‚       â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚ â”‚  â”‚
â”‚  â”‚  â”‚                                                        â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â”‚frontend.css  â”‚              â”‚ frontend.js  â”‚       â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â”‚              â”‚              â”‚              â”‚       â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â”‚ â€¢ Form       â”‚              â”‚ â€¢ AJAX call  â”‚       â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â”‚   styling    â”‚              â”‚ â€¢ Logging    â”‚       â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â”‚   (minimal)  â”‚              â”‚ â€¢ Redirect   â”‚       â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚ â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚
â”‚  â”‚                                                              â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚
â”‚  â”‚  â”‚         DATA STORAGE                                   â”‚ â”‚  â”‚
â”‚  â”‚  â”‚                                                        â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  CSV Files              WordPress Options             â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â”‚ /wp-content/ â”‚       â”‚   Options    â”‚              â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â”‚   /uploads/  â”‚       â”‚              â”‚              â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â”‚   /class-    â”‚       â”‚ â€¢ Field IDs  â”‚              â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â”‚   schedules/ â”‚       â”‚ â€¢ Trigger    â”‚              â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â”‚              â”‚       â”‚   value      â”‚              â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â”‚ â€¢ sunday.csv â”‚       â”‚ â€¢ CSV paths  â”‚              â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â”‚ â€¢ tuesday.csvâ”‚       â”‚ â€¢ Debug mode â”‚              â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚ â”‚  â”‚
â”‚  â”‚  â”‚                                                        â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  Transients                                           â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                     â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â”‚ â€¢ Cached CSV â”‚                                     â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â”‚ â€¢ Redirect   â”‚                                     â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â”‚   URLs       â”‚                                     â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                     â”‚ â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚              ELEMENTOR PRO                                   â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚
â”‚  â”‚  â”‚              Form Widget                               â”‚ â”‚  â”‚
â”‚  â”‚  â”‚                                                        â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  Fields:                                               â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ payment_method (××©×¨××™ / ××–×•××Ÿ / ×”×¢×‘×¨×”)             â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ team (×™×•× ×¨××©×•×Ÿ / ×™×•× ×©×œ×™×©×™)                       â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ kupa (××œ× / ×××•×—×“×ª)                                â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ first_name, last_name, email, etc.                 â”‚ â”‚  â”‚
â”‚  â”‚  â”‚                                                        â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  Hook: elementor_pro/forms/new_record                 â”‚ â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“Š Data Flow Diagram

### Scenario 1: Credit Card Payment (××©×¨××™) - WITH REDIRECT

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    USER     â”‚
â”‚  fills form â”‚
â”‚  selects:   â”‚
â”‚  ××©×¨××™      â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ELEMENTOR FORM SUBMISSION      â”‚
â”‚  Form data captured:            â”‚
â”‚  â€¢ payment_method: "××©×¨××™"      â”‚
â”‚  â€¢ team: "×™×•× ×¨××©×•×Ÿ - 19:00"    â”‚
â”‚  â€¢ kupa: "××œ×"                  â”‚
â”‚  â€¢ first_name, email, etc.      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  FORM_HANDLER                      â”‚
â”‚  Hook: elementor_pro/forms/        â”‚
â”‚        new_record                  â”‚
â”‚  â€¢ Extract form data               â”‚
â”‚  â€¢ Log submission                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  REDIRECT CLASS                    â”‚
â”‚  Function: get_redirect_url()      â”‚
â”‚                                    â”‚
â”‚  STEP 1: Check payment_method      â”‚
â”‚  â”œâ”€ Is "××©×¨××™"? âœ… YES            â”‚
â”‚  â””â”€ PROCEED with redirect          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  STEP 2: Determine CSV             â”‚
â”‚  â”œâ”€ team = "×™×•× ×¨××©×•×Ÿ..."         â”‚
â”‚  â””â”€ Select: sunday-classes.csv     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  CSV_HANDLER                       â”‚
â”‚  â€¢ Parse sunday-classes.csv        â”‚
â”‚  â€¢ Get today's date: 2025-10-26    â”‚
â”‚  â€¢ Find matching row               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  STEP 3: Select Column             â”‚
â”‚  â”œâ”€ kupa = "××œ×"                  â”‚
â”‚  â””â”€ Use: Column L (link_full)      â”‚
â”‚                                    â”‚
â”‚  Retrieved URL:                    â”‚
â”‚  https://payment.com/charge?       â”‚
â”‚    name=[field id="first_name"]&   â”‚
â”‚    email=[field id="email"]        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  STEP 4: Replace Placeholders      â”‚
â”‚  â€¢ [field id="first_name"] â†’ John  â”‚
â”‚  â€¢ [field id="email"] â†’ john@...   â”‚
â”‚                                    â”‚
â”‚  Final URL:                        â”‚
â”‚  https://payment.com/charge?       â”‚
â”‚    name=John&email=john@email.com  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ELEMENTOR HANDLER                 â”‚
â”‚  â€¢ Set redirect_url in response    â”‚
â”‚  â€¢ Store in transient (backup)     â”‚
â”‚  â€¢ Log final URL                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  BROWSER REDIRECT                  â”‚
â”‚  â€¢ Form submits successfully       â”‚
â”‚  â€¢ JavaScript detects redirect URL â”‚
â”‚  â€¢ User redirected to payment page â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  PAYMENT PAGE   â”‚
â”‚  External site  â”‚
â”‚  processes      â”‚
â”‚  credit card    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Scenario 2: Cash/Transfer Payment - NO REDIRECT

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    USER     â”‚
â”‚  fills form â”‚
â”‚  selects:   â”‚
â”‚  ××–×•××Ÿ      â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ELEMENTOR FORM SUBMISSION      â”‚
â”‚  Form data captured:            â”‚
â”‚  â€¢ payment_method: "××–×•××Ÿ"      â”‚
â”‚  â€¢ team: "×™×•× ×¨××©×•×Ÿ - 19:00"    â”‚
â”‚  â€¢ other fields...              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  FORM_HANDLER                      â”‚
â”‚  â€¢ Extract form data               â”‚
â”‚  â€¢ Log submission                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  REDIRECT CLASS                    â”‚
â”‚  Function: get_redirect_url()      â”‚
â”‚                                    â”‚
â”‚  STEP 1: Check payment_method      â”‚
â”‚  â”œâ”€ Is "××©×¨××™"? âŒ NO             â”‚
â”‚  â””â”€ STOP - Return NULL             â”‚
â”‚                                    â”‚
â”‚  Log: "Payment method is ××–×•××Ÿ,    â”‚
â”‚        not ××©×¨××™. Skipping."       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  FORM_HANDLER                      â”‚
â”‚  â€¢ No redirect URL generated       â”‚
â”‚  â€¢ No redirect set                 â”‚
â”‚  â€¢ Form submits normally           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  NORMAL ELEMENTOR PROCESSING       â”‚
â”‚  â€¢ Email notifications sent        â”‚
â”‚  â€¢ Database entries created        â”‚
â”‚  â€¢ Success message shown           â”‚
â”‚  â€¢ No external redirect            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  USER SEES      â”‚
â”‚  Success        â”‚
â”‚  message on     â”‚
â”‚  same page      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ Class Interaction Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         EDR_Core                                 â”‚
â”‚  Responsibilities:                                               â”‚
â”‚  â€¢ Initialize plugin                                             â”‚
â”‚  â€¢ Load all dependencies                                         â”‚
â”‚  â€¢ Register hooks                                                â”‚
â”‚  â€¢ Coordinate between components                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚               â”‚               â”‚
            â–¼               â–¼               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ EDR_Admin       â”‚ â”‚ EDR_Redirectâ”‚ â”‚ EDR_Form_Handlerâ”‚
â”‚                 â”‚ â”‚             â”‚ â”‚                 â”‚
â”‚ â€¢ Menus         â”‚ â”‚ â€¢ Main      â”‚ â”‚ â€¢ Hook into     â”‚
â”‚ â€¢ Pages         â”‚ â”‚   logic     â”‚ â”‚   Elementor     â”‚
â”‚ â€¢ Assets        â”‚ â”‚ â€¢ Payment   â”‚ â”‚ â€¢ Extract data  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   check     â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚          â”‚ â€¢ URL gen   â”‚          â”‚
         â”‚          â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜          â”‚
         â”‚                 â”‚                 â”‚
         â”‚                 â”‚ Uses            â”‚
         â”‚                 â”‚                 â”‚
         â”‚                 â–¼                 â”‚
         â”‚          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
         â”‚          â”‚EDR_CSV_      â”‚         â”‚
         â”‚          â”‚Handler       â”‚         â”‚
         â”‚          â”‚              â”‚         â”‚
         â”‚          â”‚ â€¢ Parse      â”‚         â”‚
         â”‚          â”‚ â€¢ Validate   â”‚         â”‚
         â”‚          â”‚ â€¢ Find dates â”‚         â”‚
         â”‚          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
         â”‚                                   â”‚
         â–¼                                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ EDR_Settings     â”‚              â”‚  EDR_AJAX        â”‚
â”‚ EDR_CSV_Manager  â”‚              â”‚                  â”‚
â”‚ EDR_Testing_Tool â”‚              â”‚ â€¢ Handle         â”‚
â”‚                  â”‚              â”‚   requests       â”‚
â”‚ Admin UI Classes â”‚              â”‚ â€¢ Security       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ—‚ï¸ File Dependencies

```
elementor-dynamic-redirect.php
â”œâ”€â”€ Loads â†’ includes/class-edr-core.php
    â”œâ”€â”€ Loads â†’ includes/class-edr-csv-handler.php
    â”œâ”€â”€ Loads â†’ includes/class-edr-redirect.php
    â”‚   â””â”€â”€ Uses â†’ class-edr-csv-handler.php
    â”œâ”€â”€ Loads â†’ includes/class-edr-form-handler.php
    â”‚   â””â”€â”€ Uses â†’ class-edr-redirect.php
    â”œâ”€â”€ Loads â†’ includes/class-edr-ajax.php
    â”‚   â””â”€â”€ Uses â†’ class-edr-redirect.php
    â””â”€â”€ Loads â†’ admin/class-edr-admin.php
        â”œâ”€â”€ Loads â†’ admin/class-edr-settings.php
        â”œâ”€â”€ Loads â†’ admin/class-edr-csv-manager.php
        â”‚   â””â”€â”€ Uses â†’ class-edr-csv-handler.php
        â””â”€â”€ Loads â†’ admin/class-edr-testing-tool.php
            â””â”€â”€ Uses â†’ class-edr-redirect.php
```

---

## ğŸ¯ Hook Points & Actions

### WordPress Hooks
```
plugins_loaded
â”œâ”€â”€ Initialize plugin
â””â”€â”€ Load text domain

admin_menu
â”œâ”€â”€ Register settings page
â”œâ”€â”€ Register CSV manager page
â”œâ”€â”€ Register testing tool page
â””â”€â”€ Register help page

admin_enqueue_scripts
â”œâ”€â”€ Load admin.css
â””â”€â”€ Load admin.js

wp_enqueue_scripts
â”œâ”€â”€ Load frontend.css (conditional)
â””â”€â”€ Load frontend.js (conditional)

register_activation_hook
â”œâ”€â”€ Create upload directory
â”œâ”€â”€ Set default options
â””â”€â”€ Check requirements

register_deactivation_hook
â””â”€â”€ Clean up transients
```

### Elementor Hooks
```
elementor_pro/forms/new_record
â””â”€â”€ Capture form submission
    â”œâ”€â”€ Extract form data
    â”œâ”€â”€ Check payment method
    â”œâ”€â”€ Generate redirect URL (if applicable)
    â””â”€â”€ Set redirect or allow normal submission
```

### Custom AJAX Actions
```
wp_ajax_michal_get_redirect
wp_ajax_nopriv_michal_get_redirect
â””â”€â”€ Handle AJAX redirect requests
    â”œâ”€â”€ Verify nonce
    â”œâ”€â”€ Process form data
    â””â”€â”€ Return redirect URL
```

---

## ğŸ’¾ Database Schema

### WordPress Options Table
```sql
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ option_name                         â”‚ option_value         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ edr_settings                        â”‚ [serialized array]   â”‚
â”‚   â”œâ”€ team_field_id                  â”‚   'team'             â”‚
â”‚   â”œâ”€ kupa_field_id                  â”‚   'kupa'             â”‚
â”‚   â”œâ”€ payment_field_id               â”‚   'payment_method'   â”‚
â”‚   â”œâ”€ payment_trigger_value          â”‚   '××©×¨××™'            â”‚
â”‚   â”œâ”€ sunday_csv_path                â”‚   '/path/to/...'     â”‚
â”‚   â”œâ”€ tuesday_csv_path               â”‚   '/path/to/...'     â”‚
â”‚   â””â”€ debug_enabled                  â”‚   true/false         â”‚
â”‚                                     â”‚                      â”‚
â”‚ edr_version                         â”‚ '1.0.0'              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Transients (Temporary Cache)
```sql
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ transient_name                     â”‚ value               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ edr_sunday_csv_cache               â”‚ [parsed CSV data]   â”‚
â”‚   â””â”€ Expires: 1 hour               â”‚                     â”‚
â”‚                                    â”‚                     â”‚
â”‚ edr_tuesday_csv_cache              â”‚ [parsed CSV data]   â”‚
â”‚   â””â”€ Expires: 1 hour               â”‚                     â”‚
â”‚                                    â”‚                     â”‚
â”‚ elementor_redirect_{session_id}    â”‚ [redirect URL]      â”‚
â”‚   â””â”€ Expires: 60 seconds           â”‚                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ” Security Flow

```
User Input
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Nonce Verification  â”‚ â† check_admin_referer()
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â† check_ajax_referer()
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Capability Check    â”‚ â† current_user_can()
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Input Sanitization  â”‚ â† sanitize_text_field()
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â† sanitize_file_name()
       â”‚                â† esc_url_raw()
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Data Validation     â”‚ â† Custom validation
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â† File type check
       â”‚                â† CSV structure check
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Processing          â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Output Escaping     â”‚ â† esc_html()
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â† esc_url()
       â”‚                â† esc_attr()
       â–¼
    Output
```

---

## ğŸ“ˆ Performance Optimization

### Caching Strategy
```
CSV File Read Request
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Check Transient      â”‚
â”‚ Cache Exists?        â”‚
â””â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â”œâ”€ YES â”€â”€â†’ Return Cached Data (Fast!)
    â”‚
    â””â”€ NO
       â”‚
       â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Read CSV File    â”‚
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Parse CSV Data   â”‚
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Store in         â”‚
    â”‚ Transient        â”‚
    â”‚ (1 hour)         â”‚
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
    Return Data
```

---

This architecture ensures:
âœ… **Separation of Concerns** - Each class has one responsibility
âœ… **Scalability** - Easy to add new features
âœ… **Security** - Multiple layers of protection
âœ… **Performance** - Intelligent caching
âœ… **Maintainability** - Clear structure and dependencies
